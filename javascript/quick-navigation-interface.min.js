function murmurhash3_32_gc(a,b){var c,d,e,f,g,h,i,j;for(c=3&a.length,d=a.length-c,e=b,g=3432918353,h=461845907,j=0;d>j;)i=255&a.charCodeAt(j)|(255&a.charCodeAt(++j))<<8|(255&a.charCodeAt(++j))<<16|(255&a.charCodeAt(++j))<<24,++j,i=(65535&i)*g+(((i>>>16)*g&65535)<<16)&4294967295,i=i<<15|i>>>17,i=(65535&i)*h+(((i>>>16)*h&65535)<<16)&4294967295,e^=i,e=e<<13|e>>>19,f=5*(65535&e)+((5*(e>>>16)&65535)<<16)&4294967295,e=(65535&f)+27492+(((f>>>16)+58964&65535)<<16);switch(i=0,c){case 3:i^=(255&a.charCodeAt(j+2))<<16;case 2:i^=(255&a.charCodeAt(j+1))<<8;case 1:i^=255&a.charCodeAt(j),i=(65535&i)*g+(((i>>>16)*g&65535)<<16)&4294967295,i=i<<15|i>>>17,i=(65535&i)*h+(((i>>>16)*h&65535)<<16)&4294967295,e^=i}return e^=a.length,e^=e>>>16,e=2246822507*(65535&e)+((2246822507*(e>>>16)&65535)<<16)&4294967295,e^=e>>>13,e=3266489909*(65535&e)+((3266489909*(e>>>16)&65535)<<16)&4294967295,e^=e>>>16,e>>>0}!function(a){"use strict";var b=window.QuickNavigationInterface={Models:{},Collections:{},Views:{},start:function(){try{b.options=window.qniOptions,b.mainContainer=a("#qni-container"),b.searchField=a("#qni-search-field"),b.searchResults=a("#qni-search-results"),b.instructions=a("#qni-instructions"),window.qniOptions=null,b.allLinks=new b.Collections.Links(b.getAllLinks()),b.searchResultsCollection=new b.Collections.Links([]),b.searchResultsView=new b.Views.Links({el:b.searchResults,collection:b.searchResultsCollection}),a(window).keyup(b.toggleInterface),b.mainContainer.click(b.toggleInterface),b.searchField.keyup(b.showRelevantLinks)}catch(c){b.log(c)}},getAllLinks:function(){var a=[];return a=a.concat(b.getCurrentPageLinks(),b.getContentItems())},getCurrentPageLinks:function(){var c=[];return a("a").each(function(){var d="",e=a(this).text(),f=a(this).attr("href");a(this).parent().parent().hasClass("wp-submenu")?d=a(this).parent().parent().parent().find(".wp-menu-name").text():"wp-admin-bar-new-content-default"===a(this).parent().parent().attr("id")&&(e=a("#wp-admin-bar-new-content").find(".ab-label").text()+" "+e),c.push(new b.Models.Link({type:"link",title:e,parentTitle:d,url:f}))}),c},getContentItems:function(){var a=[];return _.each(window.qniContentIndex,function(c){a.push(new b.Models.Link({type:"content",title:c.title,url:c.url}))}),window.qniContentIndex=null,a},toggleInterface:function(a){try{if("keyup"===a.type)if(a.which===b.options.shortcuts["open-interface"].code){if("input"===a.target.tagName.toLowerCase()||"textarea"===a.target.tagName.toLowerCase())return;b.openInterface()}else a.which===b.options.shortcuts["close-interface"].code&&b.closeInterface();else"click"===a.type&&("notification-dialog-background"===a.target.className||"button-link media-modal-close"===a.target.className)&&b.closeInterface()}catch(c){b.log(c)}},openInterface:function(){b.searchField.val(""),b.mainContainer.addClass("qni-active"),b.searchField.focus()},closeInterface:function(){b.mainContainer.removeClass("qni-active"),b.instructions.removeClass("qni-active"),b.searchResultsCollection.reset(),b.searchField.blur()},showRelevantLinks:function(a){try{a.which===b.options.shortcuts["open-link"].code?b.openLink():a.which===b.options.shortcuts["next-link"].code?b.searchResultsCollection.moveActiveLink("forwards"):a.which===b.options.shortcuts["previous-link"].code?b.searchResultsCollection.moveActiveLink("backwards"):b.updateSearchResults()}catch(c){b.log(c)}},openLink:function(){var a=b.searchResults.find("li.qni-active").find("a");void 0!==a.attr("href")&&(a.get(0).click(),b.closeInterface())},updateSearchResults:function(){var a=b.searchField.val();b.allLinks.invoke("set",{state:"inactive"}),b.searchResultsCollection.reset(b.allLinks.search(a,b.options["search-results-limit"])),b.searchResultsCollection.length>0?(b.instructions.addClass("qni-active"),b.searchResults.addClass("qni-active")):(b.instructions.removeClass("qni-active"),b.searchResults.removeClass("qni-active"))},log:function(a){window.console&&("string"==typeof a?console.log("Quick Navigation Interface: "+a):console.log("Quick Navigation Interface: ",a))}}}(jQuery),function(){"use strict";var a=window.QuickNavigationInterface;a.Collections.Links=Backbone.Collection.extend({model:a.Models.Link,search:function(a,b){var c=[];return""!==a&&this.every(function(d){return d.get("title").toLowerCase().indexOf(a.toLowerCase())>=0&&c.push(d),c.length<b}),c.hasOwnProperty(0)&&c[0].set({state:"active"}),c},moveActiveLink:function(a){if(0!==this.length){var b,c=this.where({state:"active"}),d=this.indexOf(c[0]);"forwards"===a?(b=d+1,this.length===b&&(b=0)):(b=d-1,-1===b&&(b=this.length-1)),this.at(d).set({state:"inactive"}),this.at(b).set({state:"active"})}}})}(),function(){"use strict";var a=window.QuickNavigationInterface;a.Models.Link=Backbone.Model.extend({defaults:{id:0,type:"",title:"",parentTitle:"",url:"",state:"inactive"},initialize:function(){this.set("id",murmurhash3_32_gc(this.get("title")+this.get("url")))}})}(),function(){"use strict";var a=window.QuickNavigationInterface;a.Views.Link=Backbone.View.extend({tagName:"li",template:wp.template("qni-link"),initialize:function(){this.render(),this.listenTo(this.model,"change",this.render)},render:function(){"active"===this.model.get("state")?this.$el.addClass("qni-active"):this.$el.removeClass("qni-active"),this.$el.html(this.template(this.model.toJSON()))}}),a.Views.Links=Backbone.View.extend({tagName:"ul",initialize:function(){this.render(),this.listenTo(this.collection,"reset",this.render)},render:function(){this.$el.html(""),this.collection.each(function(b){var c=new a.Views.Link({model:b});this.$el.append(c.el)},this)}})}(),QuickNavigationInterface.start();
//# sourceMappingURL=quick-navigation-interface.min.js.map